replicaCount: 1
replicaCount-task: 1

image:
  repository: ishanthakur1998/identity-iq
  pullPolicy: IfNotPresent
  tag: latest

# imagePullSecrets:
#   - name: regcred

service:
  type: NodePort
  port: 8080


resources:
  requests:
    cpu: 100m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 1Gi

hpa:
  ui:
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    businessHours:
      minReplicas: 3
      maxReplicas: 15
    offHours:
      minReplicas: 2
      maxReplicas: 5
  task:
    minReplicas: 2
    maxReplicas: 8
    targetCPUUtilizationPercentage: 70
    businessHours:
      minReplicas: 3
      maxReplicas: 10
    offHours:
      minReplicas: 2
      maxReplicas: 3

task:
  UPLOAD_FILE_PATH: "/opt/identityiq/upload"
  FULL_TEXT_INDEX_PATH: "/opt/identityiq/index"
  heap:
    min: "-Xms512m"
    max: "-Xmx512m"
  resources:
    requests:
      cpu: "1"
      memory: "1Gi"
    limits:
      cpu: "8"
      memory: "1Gi"

ui:
  UPLOAD_FILE_PATH: "/opt/identityiq/upload"
  FULL_TEXT_INDEX_PATH: "/opt/identityiq/index"
  heap:
    min: "-Xms1g"
    max: "-Xmx1g"
  resources:
    requests:
      cpu: "1"
      memory: "1Gi"
    limits:
      cpu: "1"
      memory: "1Gi"

nodeSelector: {}

tolerations: []

affinity: {}

storage:
  nfsServer: "127.0.0.1"  # Docker Desktop host
  config:
    nfsPath: "/iiq-config"
  logs:
    nfsPath: "/iiq-logs"
  size: "10Gi"

initContainer:
  image: "ishanthakur1998/identity-iq:latest"
  env:
    DELTA_DB_DEPLOYMENT: "yes"     # Harness variable: yes/no
    INITIAL_DEPLOYMENT: "yes"   # Harness variable: yes for initial, no for updates
    FULL_DEPLOYMENT: "no"   # Harness variable: yes for initial, no for updates"
    DB_HOST: "host.docker.internal"
    DB_PORT: "3310"
    DB_USER: "root"
    DB_PASS: "root"
    DB_NAME: "identityiq"
    DB_WAIT_TIME: "5"
